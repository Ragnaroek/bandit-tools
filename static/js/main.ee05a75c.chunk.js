(this["webpackJsonpbandit-tools"]=this["webpackJsonpbandit-tools"]||[]).push([[0],{296:function(t,e,a){"use strict";a.r(e);var s=a(1),r=a(57),n=a.n(r),i=a(72),c=a(162),l=a(163),o=a(180),d=a(114),h=a(306),j=a(312),u=a(309),b=a(307),x=a(308),v=a(93),O=a(37),f=a(179),g=a(181),m=a(115),p=a(70),y=a(121),D=a(120),k=a(166),w=a(8),A=function t(){Object(d.a)(this,t)},C=function(t){Object(l.a)(a,t);var e=Object(o.a)(a);function a(t){var s;return Object(d.a)(this,a),(s=e.call(this,t)).state=new A,s}return Object(c.a)(a,[{key:"stateSelect",value:function(t){var e=this,a=new FileReader;a.onloadend=function(){e.setState({stateData:JSON.parse(a.result)})},a.readAsText(t.target.files[0])}},{key:"logSelect",value:function(t){var e=this;k.parse(t.target.files[0],{complete:function(t){e.setState({logData:t}),console.log("result=",t)}})}},{key:"navigation",value:function(){var t=this;return Object(w.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(w.jsx)(D.a.Brand,{href:"#home",children:"Bandit Tools"}),Object(w.jsxs)(y.a,{inline:!0,children:[Object(w.jsx)(m.a,{pill:!0,variant:"info",children:"State File:"}),Object(w.jsx)(p.a,{type:"file",onChange:function(e){return t.stateSelect(e)}})]}),Object(w.jsxs)(y.a,{inline:!0,children:[Object(w.jsx)(m.a,{pill:!0,variant:"info",children:"Log File:"}),Object(w.jsx)(p.a,{type:"file",onChange:function(e){return t.logSelect(e)}})]})]})}},{key:"niceName",value:function(t){return t.split(":")[1]}},{key:"transformToChartData",value:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push({arm:this.niceName(a),val:t[a]});return e.sort((function(t,e){return parseInt(t.arm,10)-parseInt(e.arm,10)})),e}},{key:"transformToTimeSeriesUpdate",value:function(t){for(var e=[],a=0;a<t.data.length;a++){var s=t.data[a];"UPDATE"===s[0]&&e.push(parseFloat(s[3]))}return e}},{key:"logChartsRow",value:function(){if(this.state.logData){var t=this.transformToTimeSeriesUpdate(this.state.logData);return Object(w.jsx)(v.a,{children:Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.a,{domainPadding:20,width:1200,height:300,children:[Object(w.jsx)(j.a,{label:"Draws",fixLabelOverlap:!0}),Object(w.jsx)(j.a,{label:"Reward (kH/s)",dependentAxis:!0,axisLabelComponent:Object(w.jsx)(u.a,{dy:-12})}),Object(w.jsx)(b.a,{data:t,style:{data:{strokeWidth:1,strokeLinecap:"round"}}})]})})})}return Object(w.jsx)(v.a,{children:Object(w.jsx)(O.a,{xs:12,md:12,lg:12,style:{margin:"20px"},children:Object(w.jsx)("div",{children:"Upload your log file to see log related charts"})})})}},{key:"countChartsRow",value:function(){if(this.state.stateData){var t=this.transformToChartData(this.state.stateData.counts),e=this.transformToChartData(this.state.stateData.values);return Object(w.jsxs)("div",{children:[Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.a,{domainPadding:20,children:[Object(w.jsx)(j.a,{label:"Arms",fixLabelOverlap:!0}),Object(w.jsx)(j.a,{label:"Draw Count",dependentAxis:!0,axisLabelComponent:Object(w.jsx)(u.a,{dy:-12})}),Object(w.jsx)(x.a,{data:t,x:"arm",y:"val"})]})}),Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.a,{domainPadding:20,children:[Object(w.jsx)(j.a,{label:"Arms",fixLabelOverlap:!0}),Object(w.jsx)(j.a,{label:"Average Reward (kH/s)",dependentAxis:!0,axisLabelComponent:Object(w.jsx)(u.a,{dy:-12})}),Object(w.jsx)(x.a,{data:e,x:"arm",y:"val"})]})})]})}return Object(w.jsx)(O.a,{xs:12,md:12,lg:12,style:{margin:"20px"},children:Object(w.jsx)("div",{children:"Upload your state file to see state related charts"})})}},{key:"highest",value:function(t){var e="?",a=-1;for(var s in t)if(t.hasOwnProperty(s)){var r=t[s];r>a&&(a=r,e=s)}return[this.niceName(e),a]}},{key:"stateDataSummary",value:function(){if(this.state.stateData){var t=this.highest(this.state.stateData.values),e=Object(i.a)(t,2),a=e[0],s=e[1],r=this.highest(this.state.stateData.counts),n=Object(i.a)(r,2),c=n[0],l=n[1];return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{children:["Arm with highest reward: ",a," (",s.toPrecision(4),")"]}),Object(w.jsxs)("div",{children:["Arm with highest count: ",c," (",l,")"]})]})}}},{key:"minMaxReward",value:function(t){for(var e=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=0;s<t.data.length;s++){var r=t.data[s];if("UPDATE"===r[0]){var n=parseFloat(r[3]);n<e&&(e=n),n>a&&(a=n)}}return[e,a]}},{key:"regretAndAvg",value:function(t,e){for(var a=0,s=0,r=0;r<t.data.length;r++){var n=t.data[r];if("UPDATE"===n[0]){var i=parseFloat(n[3]);a+=e-i,s+=i}}return[a,s/t.data.length]}},{key:"logDataSummary",value:function(){if(this.state.logData){var t=this.minMaxReward(this.state.logData),e=Object(i.a)(t,2),a=e[0],s=e[1],r=this.regretAndAvg(this.state.logData,s),n=Object(i.a)(r,2),c=n[0],l=n[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:"\xa0"}),Object(w.jsxs)("div",{children:["Total regret: ",c.toPrecision(4)," kH/s"]}),Object(w.jsxs)("div",{children:["Min. reward: ",a.toPrecision(4)," kH/s"]}),Object(w.jsxs)("div",{children:["Max. reward: ",s.toPrecision(4)," kH/s"]}),Object(w.jsxs)("div",{children:["Avg. reward: ",l.toPrecision(4)," kH/s"]})]})}}},{key:"summaryPanel",value:function(){if(this.state.stateData||this.state.logData)return Object(w.jsx)(O.a,{xs:12,md:6,lg:4,children:Object(w.jsxs)(g.a,{children:[this.stateDataSummary(),this.logDataSummary()]})})}},{key:"renderCharts",value:function(){return Object(w.jsxs)(f.a,{children:[Object(w.jsxs)(v.a,{children:[this.countChartsRow(),this.summaryPanel()]}),this.logChartsRow()]})}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("header",{children:this.navigation()}),Object(w.jsx)("main",{children:this.renderCharts()})]})}}]),a}(s.Component);n.a.render(Object(w.jsx)(C,{}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.ee05a75c.chunk.js.map