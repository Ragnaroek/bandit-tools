(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,a,t){e.exports=t(345)},345:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(64),i=t.n(l),s=t(67),o=t(166),c=t(183),u=t(167),m=t(184),d=t(111),h=t(359),v=t(364),E=t(363),f=t(358),g=t(361),p=t(360),y=t(351),b=t(352),k=t(353),w=t(362),D=t(354),x=t(355),A=t(357),S=t(171),C=t(168),O=function e(){Object(d.a)(this,e)},T=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state=new O,t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"stateSelect",value:function(e){var a=this,t=new FileReader;t.onloadend=function(){a.setState({stateData:JSON.parse(t.result)})},t.readAsText(e.target.files[0])}},{key:"logSelect",value:function(e){var a=this;C.parse(e.target.files[0],{complete:function(e){a.setState({logData:e}),console.log("result=",e)}})}},{key:"navigation",value:function(){var e=this;return r.a.createElement(p.a,{staticTop:!0},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Brand,null,r.a.createElement("a",{href:"#home"},"Bandit Tools"))),r.a.createElement(y.a,{pullRight:!0},r.a.createElement(p.a.Form,null,r.a.createElement(b.a,{bsStyle:"info",style:{display:"inline-block",minWidth:"70px"}},"State File:"),r.a.createElement(k.a,null,r.a.createElement(w.a,{type:"file",onChange:function(a){return e.stateSelect(a)}}))," "),r.a.createElement(p.a.Form,null,r.a.createElement(b.a,{bsStyle:"info",style:{display:"inline-block",minWidth:"70px"}},"Log File:"),r.a.createElement(k.a,null,r.a.createElement(w.a,{type:"file",onChange:function(a){return e.logSelect(a)}}))," ")))}},{key:"niceName",value:function(e){return e.split(":")[1]}},{key:"transformToChartData",value:function(e){var a=[];for(var t in e)e.hasOwnProperty(t)&&a.push({arm:this.niceName(t),val:e[t]});return a.sort(function(e,a){return parseInt(e.arm,10)-parseInt(a.arm,10)}),a}},{key:"transformToTimeSeriesUpdate",value:function(e){for(var a=[],t=0;t<e.data.length;t++){var n=e.data[t];"UPDATE"===n[0]&&a.push(parseFloat(n[3]))}return a}},{key:"logChartsRow",value:function(){if(this.state.logData){var e=this.transformToTimeSeriesUpdate(this.state.logData);return r.a.createElement(D.a,null,r.a.createElement(x.a,{xs:12,md:6,lg:12},r.a.createElement(h.a,{domainPadding:20,width:1200,height:300},r.a.createElement(v.a,{label:"Draws",fixLabelOverlap:!0}),r.a.createElement(v.a,{label:"Reward (kH/s)",dependentAxis:!0,axisLabelComponent:r.a.createElement(E.a,{dy:-12})}),r.a.createElement(f.a,{data:e,style:{data:{strokeWidth:1,strokeLinecap:"round"}}}))))}return r.a.createElement(D.a,null,r.a.createElement(x.a,{xs:12,md:12,lg:12,style:{margin:"20px"}},r.a.createElement("div",null,"Upload your log file to see log related charts")))}},{key:"countChartsRow",value:function(){if(this.state.stateData){var e=this.transformToChartData(this.state.stateData.counts),a=this.transformToChartData(this.state.stateData.values);return r.a.createElement("div",null,r.a.createElement(x.a,{xs:12,md:6,lg:4},r.a.createElement(h.a,{domainPadding:20},r.a.createElement(v.a,{label:"Arms",fixLabelOverlap:!0}),r.a.createElement(v.a,{label:"Draw Count",dependentAxis:!0,axisLabelComponent:r.a.createElement(E.a,{dy:-12})}),r.a.createElement(g.a,{data:e,x:"arm",y:"val"}))),r.a.createElement(x.a,{xs:12,md:6,lg:4},r.a.createElement(h.a,{domainPadding:20},r.a.createElement(v.a,{label:"Arms",fixLabelOverlap:!0}),r.a.createElement(v.a,{label:"Average Reward (kH/s)",dependentAxis:!0,axisLabelComponent:r.a.createElement(E.a,{dy:-12})}),r.a.createElement(g.a,{data:a,x:"arm",y:"val"}))))}return r.a.createElement(x.a,{xs:12,md:12,lg:12,style:{margin:"20px"}},r.a.createElement("div",null,"Upload your state file to see state related charts"))}},{key:"highest",value:function(e){var a="?",t=-1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r>t&&(t=r,a=n)}return[this.niceName(a),t]}},{key:"stateDataSummary",value:function(){if(this.state.stateData){var e=this.highest(this.state.stateData.values),a=Object(s.a)(e,2),t=a[0],n=a[1],l=this.highest(this.state.stateData.counts),i=Object(s.a)(l,2),o=i[0],c=i[1];return r.a.createElement("div",null,r.a.createElement("div",null,"Arm with highest reward: ",t," (",n.toPrecision(4),")"),r.a.createElement("div",null,"Arm with highest count: ",o," (",c,")"))}}},{key:"minMaxReward",value:function(e){for(var a=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER,n=0;n<e.data.length;n++){var r=e.data[n];if("UPDATE"===r[0]){var l=parseFloat(r[3]);l<a&&(a=l),l>t&&(t=l)}}return[a,t]}},{key:"regretAndAvg",value:function(e,a){for(var t=0,n=0,r=0;r<e.data.length;r++){var l=e.data[r];if("UPDATE"===l[0]){var i=parseFloat(l[3]);t+=a-i,n+=i}}return[t,n/e.data.length]}},{key:"logDataSummary",value:function(){if(this.state.logData){var e=this.minMaxReward(this.state.logData),a=Object(s.a)(e,2),t=a[0],n=a[1],l=this.regretAndAvg(this.state.logData,n),i=Object(s.a)(l,2),o=i[0],c=i[1];return r.a.createElement("div",null,r.a.createElement("div",null,"\xa0"),r.a.createElement("div",null,"Total regret: ",o.toPrecision(4)," kH/s"),r.a.createElement("div",null,"Min. reward: ",t.toPrecision(4)," kH/s"),r.a.createElement("div",null,"Max. reward: ",n.toPrecision(4)," kH/s"),r.a.createElement("div",null,"Avg. reward: ",c.toPrecision(4)," kH/s"))}}},{key:"summaryPanel",value:function(){if(this.state.stateData||this.state.logData)return r.a.createElement(x.a,{xs:12,md:6,lg:4},r.a.createElement(A.a,null,this.stateDataSummary(),this.logDataSummary()))}},{key:"renderCharts",value:function(){return r.a.createElement(S.a,null,r.a.createElement(D.a,null,this.countChartsRow(),this.summaryPanel()),this.logChartsRow())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,this.navigation()),r.a.createElement("main",null,this.renderCharts()))}}]),a}(n.Component);i.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.c44c9462.chunk.js.map